# AHC033 memo

## 概要

- N\*N グリッドにおいて、クレーンを動かして 0 ~ N\*N-1 までの N\*N 個のコンテナを左端から右端に運ぶ問題
- クレーンは大クレーンが 1 個、小クレーンが N-1 個
  - クレーンは上から釣りさげるイメージでクレーン車のイメージとは違う
  - 大クレーンはコンテナを持ち上げた時に下を通れる
  - 小クレーンはコンテナを持ち上げても下を通れない
  - 各クレーンは P(コンテナを掴む) Q(コンテナを離す) UDLR.(クレーンの移動) B(クレーンを爆破) の操作が可能
  - クレーン同士は交差することは出来ないが、1 ターンの間に連鎖的に上下左右に移動することは可能
- スコアを最小化するのが目的で、スコアは 4 つの要素に分かれている
  - 1 番目に大きい要素は「未搬出のコンテナ数」で係数が 1e6
  - 2 番目に大きい要素は「間違った搬出口から搬出したコンテナ数」で係数が 1e4
  - 3 番目に大きい要素は「正しい搬出口から搬出した転倒数」で係数が 1e2
  - 4 番目に大きい要素は「操作列のターン数」で係数が 1e0

## 考察

- とりあえず「未搬出のコンテナ数」と「間違った搬出口から搬出したコンテナ数」は 0 にするのが前提

  - https://github.com/thirofoo/AHC033/pull/2 で実装したところ 11,166,768,274 点暫定 160 位（平均 300 ターンほど）
  - 他の人も 1, 2, 3 番目のペナルティは全て回避してる模様
  - 一位は自分の 4.6 倍ほどなので、1 テストケース当たり 60 ~ 70 ターンで終わってるっぽい (???)

- いくらしょぼい遷移でも 300 ターンで終わる ⇒ Sliding Puzzle みたいにビームサーチできるのでは？
  - 2 \* 2 のクレーングループを作ると時計周り・反時計周りでパズルっぽく出来る
    - ただ swap で "sort する" という時点で手数がかかるので冗長っぽい
  - クレーンを独立に考えるのは凄く難しいため、全通り探索するビームサーチが無難
    - 盤面によって最大で 5^N 通りくらいの分岐
      - LRUD の直前とは異なる操作 3 通り + stop + suspend or lower
    - スコアは生スコアでは無理そうなので考える必要あり
      - 先頭要素が搬出されない限り進まないので、極端に言えば今搬出したい要素だけをスコアに入れるのはありかも
      - またその搬出されるまでに必要なターン数が概算出来れば案外行けそう

## Todo
